(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{223:function(e,t,n){},337:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),o=n.n(c),i=(n(223),n(10)),s=n.n(i),l=n(17),d=n(8),u=n(78),j=n(69),b=n(26),h=n(12),p=n(47),f=n(370),x=n(411),O=n(372),m=n(83),g=n(414),v=n(380),y=n(28),w=n(378),C=n(194),S=n.n(C),k=n(193),N=n.n(k),B=n(379),T=n(16),P="CHANGE_ONLINE",F="INIT_CLIENTS",R="ADD_CLIENT",E="EDIT_CLIENT",D="UPDATE_CLIENT",_="INIT_SHOPS",I="ADD_SHOP",A="EDIT_SHOP",W="UPDATE_SHOP",q="INIT_ORDERS",L="ADD_ORDER",z="REMOVE_ORDER",M="UPDATE_ORDER",G="ADD_NOTI",H=function(e){return{type:P,payload:{bool:e}}},U=n(1),J=Object(f.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},IconButton:{padding:"0px"},danger:{color:"#dc3545"}}})),V=function(){var e=J(),t=new T.a,n=Object(y.b)(),c=function(){var e=Object(l.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new Promise(function(){var e=Object(l.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,"/signin"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(a)});case 2:if(200!==(r=e.sent).status){e.next=9;break}return e.t0=t,e.next=7,r.json();case 7:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 9:return e.t2=n,e.next=12,r.json();case 12:return e.t3=e.sent,e.abrupt("return",(0,e.t2)(e.t3));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()).then((function(e){t.set("name",e.name,{expires:new Date(e.expires)}),t.set("sid",e.accessToken,{expires:new Date(e.expires)}),t.set("refresh",e.refreshToken,{expires:new Date(e.expires)}),n(H(!0))})).catch((function(e){console.log(e),P(!0)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=r.a.useState(!1),i=Object(d.a)(o,2),u=i[0],j=i[1],b=function(){j(!u)},f=Object(a.useState)(!1),C=Object(d.a)(f,2),k=C[0],P=C[1];return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(x.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",className:e.root,children:Object(U.jsx)(O.a,{maxWidth:"sm",children:Object(U.jsx)(p.a,{initialValues:{login:"",password:""},validationSchema:h.b().shape({login:h.c().max(30).required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),password:h.c().max(50).required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c")}),children:function(t){var n=t.errors,a=t.handleBlur,r=t.handleChange,o=(t.handleSubmit,t.isSubmitting,t.touched),i=t.values;return Object(U.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c(i)},children:[Object(U.jsx)(x.a,{mb:3,children:Object(U.jsx)(m.a,{color:"textPrimary",variant:"h2",children:"\u0412\u0445\u043e\u0434"})}),Object(U.jsx)(x.a,{mt:3,mb:1,children:!!k&&Object(U.jsx)(m.a,{align:"center",className:e.danger,children:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"})}),Object(U.jsx)(g.a,{error:Boolean(o.login&&n.login),fullWidth:!0,helperText:o.login&&n.login,label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",margin:"normal",name:"login",onBlur:a,onChange:r,type:"text",value:i.login,variant:"outlined"}),Object(U.jsx)(g.a,{error:Boolean(o.password&&n.password),fullWidth:!0,helperText:o.password&&n.password,label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",margin:"normal",name:"password",onBlur:a,onChange:r,type:u?"text":"password",value:i.password,variant:"outlined",InputProps:{endAdornment:Object(U.jsx)(w.a,{position:"end",children:Object(U.jsx)(B.a,{className:e.IconButton,position:"end",onClick:b,children:u?Object(U.jsx)(N.a,{}):Object(U.jsx)(S.a,{})})})}}),Object(U.jsx)(x.a,{my:2,children:Object(U.jsx)(v.a,{color:"primary",fullWidth:!0,size:"large",type:"submit","aria-label":"signin",variant:"contained",children:"\u0412\u043e\u0439\u0442\u0438"})})]})}})})})})},K=n(201),$=n(409),Y=n(384),Q=n(410),X=n(377),Z=n(415),ee=n(385),te=n(381),ne=n(382),ae=n(383),re=n(9),ce=n(24),oe=n(3),ie=n(340),se=["className","href","icon","title"],le=Object(f.a)((function(e){return{item:{display:"flex",paddingTop:0,paddingBottom:0},button:{color:e.palette.text.secondary,fontWeight:e.typography.fontWeightMedium,justifyContent:"flex-start",letterSpacing:0,padding:"10px 8px",textTransform:"none",width:"100%"},icon:{marginRight:e.spacing(1)},title:{marginRight:"auto"},active:{color:e.palette.primary.main,"& $title":{fontWeight:e.typography.fontWeightMedium},"& $icon":{color:e.palette.primary.main}}}})),de=function(e){var t=e.className,n=e.href,a=e.icon,r=e.title,c=Object(ce.a)(e,se),o=le();return Object(U.jsx)(ie.a,Object(re.a)(Object(re.a)({className:Object(oe.a)(o.item,t),disableGutters:!0},c),{},{children:Object(U.jsxs)(v.a,{activeClassName:o.active,className:o.button,component:j.c,to:n,children:[a&&Object(U.jsx)(a,{className:o.icon,size:"20"}),Object(U.jsx)("span",{className:o.title,children:r})]})}))},ue=n(121),je=n.n(ue),be=[{href:"/clients",icon:te.a,title:"\u041a\u043b\u0438\u0435\u043d\u0442\u044b"},{href:"/shops",icon:ne.a,title:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d\u044b"},{href:"/orders",icon:ae.a,title:"\u0417\u0430\u043a\u0430\u0437\u044b"}],he=Object(f.a)((function(){return{mobileDrawer:{width:256},desktopDrawer:{width:256,top:64,height:"calc(100% - 64px)",background:"transparent",border:"none"}}})),pe=function(e){var t=e.onMobileClose,n=e.openMobile,r=he(),c=new T.a;Object(a.useEffect)((function(){n&&t&&t()}),[]);var o=Object(U.jsxs)(x.a,{height:"100%",display:"flex",flexDirection:"column",children:[Object(U.jsx)(x.a,{p:2,children:Object(U.jsx)(X.a,{children:be.map((function(e){return Object(U.jsx)(de,{href:e.href,title:e.title,icon:e.icon},e.title)}))})}),Object(U.jsx)(x.a,{flexGrow:1})]});return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Z.a,{lgUp:!0,children:Object(U.jsxs)(ee.a,{anchor:"left",classes:{paper:r.mobileDrawer},onClose:t,open:n,variant:"temporary",children:[o,Object(U.jsx)(Z.a,{lgUp:!0,children:Object(U.jsxs)(v.a,{color:"inherit",onClick:function(){return c.remove("sid")&window.location.reload()},children:[Object(U.jsx)(je.a,{}),"\xa0 \u0412\u044b\u0445\u043e\u0434"]})})]})}),Object(U.jsx)(Z.a,{mdDown:!0,children:Object(U.jsx)(ee.a,{anchor:"left",classes:{paper:r.desktopDrawer},open:!0,variant:"persistent",children:o})})]})};pe.defaultProps={onMobileClose:function(){},openMobile:!1};var fe=pe,xe=n(386),Oe=n(387),me=n(388),ge=n(418),ve=n(196),ye=n.n(ve),we=n(195),Ce=n.n(we),Se=["className","onMobileNavOpen"],ke=Object(f.a)((function(e){return{root:{minHeight:0},popover:{padding:e.spacing(2)}}})),Ne=function(e){var t=e.className,n=e.onMobileNavOpen,a=Object(ce.a)(e,Se),c=ke(),o=Object(y.c)((function(e){return e.notifications})),i=r.a.useState(o.length),s=Object(d.a)(i,2),l=s[0],u=s[1];r.a.useEffect((function(){u(o.length)}),[o]);var b=new T.a,h=r.a.useState(null),p=Object(d.a)(h,2),f=p[0],O=p[1],g=Boolean(f),v=g?"notifications":void 0;return Object(U.jsx)(xe.a,Object(re.a)(Object(re.a)({className:Object(oe.a)(t),elevation:0},a),{},{children:Object(U.jsxs)(Oe.a,{className:c.root,children:[Object(U.jsx)(j.b,{to:"/"}),Object(U.jsx)(x.a,{flexGrow:1}),Object(U.jsxs)(Z.a,{mdDown:!0,children:[Object(U.jsx)(B.a,{color:"inherit",onClick:function(e){O(e.currentTarget),u(0)},children:Object(U.jsx)(me.a,{badgeContent:l,color:"secondary",variant:"standard",children:Object(U.jsx)(Ce.a,{})})}),Object(U.jsx)(ge.a,{id:v,open:g,anchorEl:f,onClose:function(){O(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(U.jsxs)(x.a,{className:c.popover,children:[!o.length&&Object(U.jsx)(m.a,{children:"\u041d\u0435\u0442 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439"}),o.map((function(e,t){return Object(U.jsx)(m.a,{children:e},e+t)}))]})}),Object(U.jsx)(B.a,{color:"inherit",onClick:function(){return b.remove("sid")&window.location.reload()},children:Object(U.jsx)(je.a,{})})]}),Object(U.jsx)(Z.a,{lgUp:!0,children:Object(U.jsx)(B.a,{color:"inherit",onClick:n,children:Object(U.jsx)(ye.a,{})})})]})}))},Be=Object(f.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,display:"flex",height:"100%",overflow:"hidden",width:"100%"},wrapper:Object(u.a)({display:"flex",flex:"1 1 auto",overflow:"hidden",paddingTop:64},e.breakpoints.up("lg"),{paddingLeft:256}),contentContainer:{display:"flex",flex:"1 1 auto",overflow:"hidden"},content:{flex:"1 1 auto",height:"100%",overflow:"auto"}}})),Te=function(){var e=Be(),t=Object(a.useState)(!1),n=Object(d.a)(t,2),r=n[0],c=n[1];return Object(U.jsxs)("div",{className:e.root,children:[Object(U.jsx)(Ne,{onMobileNavOpen:function(){return c(!0)}}),Object(U.jsx)(fe,{onMobileClose:function(){return c(!1)},openMobile:r})]})},Pe=["children","title"],Fe=Object(a.forwardRef)((function(e,t){var n=e.children,a=e.title,r=void 0===a?"":a,c=Object(ce.a)(e,Pe);return document.title=r,Object(U.jsxs)("div",Object(re.a)(Object(re.a)({ref:t},c),{},{children:[Object(U.jsx)("title",{children:r}),n]}))})),Re=n(122),Ee=n.n(Re),De=n(402),_e=n(403),Ie=n(404),Ae=n(400),We=n(401),qe=n(405),Le=n(416),ze=n(6),Me=n(397),Ge=n(398),He=n(389),Ue=n(399),Je=n(394),Ve=n(395),Ke=n(396),$e=n(34),Ye=n.n($e),Qe=n(124),Xe=n.n(Qe),Ze=n(125),et=n.n(Ze),tt=n(198),nt=n.n(tt),at=n(123),rt=n.n(at),ct=n(391),ot=n(341),it=n(412),st=[{name:"0.5 Kg",weight:.5},{name:"1.0 Kg",weight:1},{name:"1.5 Kg",weight:1.5},{name:"2.0 Kg",weight:2},{name:"2.5 Kg",weight:2.5},{name:"3.0 Kg",weight:3}],lt=r.a.memo((function(e){var t=e.props,n=t.values,a=t.setFieldValue,c=t.handleBlur,o=(t.handleChange,t.key),i=t.label,u=r.a.useState([]),j=Object(d.a)(u,2),b=j[0],h=j[1];console.log(b);var p=r.a.useState(""),f=Object(d.a)(p,2),x=f[0],O=f[1],m=new T.a;r.a.useEffect((function(){"weight"===o&&h(st),["client","shop"].includes(o)&&x&&new Promise(function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(x),e.next=3,fetch("http://".concat(window.location.hostname,"/").concat(o,"/?")+new URLSearchParams({name:x}),{method:"GET",headers:{Authorization:m.get("sid")}});case 3:if(200!==(a=e.sent).status){e.next=10;break}return e.t0=t,e.next=8,a.json();case 8:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 10:return e.t2=n,e.next=13,a.json();case 13:return e.t3=e.sent,e.abrupt("return",(0,e.t2)(e.t3));case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()).then((function(e){console.log(e),h(e)})).catch((function(e){console.log(e)}))}),[x]);return Object(U.jsx)(it.a,{options:b,value:n[o]||null,getOptionLabel:function(e){var t,n;return"".concat(e.name," (").concat(null!==(t=null!==(n=e.code)&&void 0!==n?n:e.address)&&void 0!==t?t:e.weight,")")},onChange:function(e,t){return a(o,t)},getOptionSelected:function(e,t){return e.name===t.name},renderInput:function(e){var t,a;return Object(U.jsx)(g.a,Object(re.a)(Object(re.a)({},e),{},{label:i,title:null!==(t=null===(a=n[o])||void 0===a?void 0:a.info)&&void 0!==t?t:i,name:o,onChange:function(e,t){return function(e){O(e.target.value)}(e)},onBlur:c,variant:"outlined",margin:"normal",fullWidth:!0}))}})}),(function(e,t){return e.props.values[e.props.key]===t.props.values[t.props.key]})),dt=n(390),ut=Object(f.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},addButton:{marginRight:e.spacing(1)},load:{marginTop:e.spacing(3)}}})),jt=r.a.forwardRef((function(e,t){return Object(U.jsx)(ot.a,Object(re.a)({direction:"up",ref:t},e))})),bt=function(e){switch(e){case"client":return"\u041a\u043b\u0438\u0435\u043d\u0442";case"shop":return"\u041c\u0430\u0433\u0430\u0437\u0438\u043d";case"weight":return"\u0412\u0435\u0441 \u0437\u0430\u043a\u0430\u0437\u0430";default:return e}};function ht(e){var t=e.client,n=e.shop,a=ut(),c=r.a.useState(!1),o=Object(d.a)(c,2),i=o[0],u=o[1],j=new T.a,b=r.a.useState(!1),f=Object(d.a)(b,2),O=f[0],g=f[1],y=function(){u(!1)};r.a.useEffect((function(){return function(){g(!1)}}));return Object(U.jsxs)(U.Fragment,{children:[console.log(1e3),Object(U.jsx)(v.a,{onClick:function(){u(!0)},className:a.addButton,color:"primary",variant:"contained",children:"\u041d\u043e\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437"}),Object(U.jsxs)(He.a,{fullScreen:!0,open:i,onClose:y,TransitionComponent:jt,children:[Object(U.jsxs)(xe.a,{className:a.appBar,children:[Object(U.jsxs)(Oe.a,{children:[Object(U.jsx)(B.a,{edge:"start",color:"inherit",onClick:y,"aria-label":"close",children:Object(U.jsx)(Ye.a,{})}),Object(U.jsx)(m.a,{variant:"h6",className:a.title,children:"CARGO"}),Object(U.jsx)(v.a,{type:"submit",form:"insert_order",autoFocus:!0,color:"inherit",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]}),O&&Object(U.jsx)(dt.a,{className:a.load})]}),Object(U.jsx)(x.a,{p:2,children:Object(U.jsx)(p.a,{initialValues:{client:null!==t&&void 0!==t?t:null,shop:null!==n&&void 0!==n?n:null,weight:null},validationSchema:h.b().shape({client:h.b().required("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430"),shop:h.b().required("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u0430\u0433\u0430\u0437\u0438\u043d"),weight:h.b().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0435\u0441 \u0437\u0430\u043a\u0430\u0437\u0430")}),onSubmit:function(e,t){var n=t.setSubmitting;!function(e){g(!0),console.log(O),!O&&new Promise(function(){var t=Object(l.a)(s.a.mark((function t(n,a){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://".concat(window.location.hostname,"/order"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:j.get("sid")},body:JSON.stringify(e)});case 2:if(200!==(r=t.sent).status){t.next=9;break}return t.t0=n,t.next=7,r.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:return t.t2=a,t.next=12,r.json();case 12:return t.t3=t.sent,t.abrupt("return",(0,t.t2)(t.t3));case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()).then((function(e){y(),g(!1)})).catch((function(e){console.log(e),g(!1)}))}(e),n(!1)},children:function(e){var t=e.handleBlur,n=e.handleChange,a=e.handleSubmit,r=e.setFieldValue,c=e.values;return Object(U.jsxs)("form",{onSubmit:a,id:"insert_order",children:[Object(U.jsxs)(x.a,{mb:3,children:[Object(U.jsx)(m.a,{color:"textPrimary",variant:"h3",children:"\u041d\u043e\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437"}),Object(U.jsx)(m.a,{color:"textSecondary",gutterBottom:!0,variant:"body1",children:"All fields are required"})]}),Object(U.jsx)(ct.a,{}),console.log(c),Object.keys(c).map((function(e){return Object(U.jsx)(lt,{props:{values:c,setFieldValue:r,handleBlur:t,handleChange:n,key:e,label:bt(e)}},e)}))]})}})})]})]})}function pt(e){var t=e.props,n=t.touched,a=t.errors,r=t.values,c=t.handleBlur,o=t.handleChange,i=t.key,s=t.label;return Object(U.jsx)(g.a,{error:Boolean(n[i]&&a[i]),fullWidth:!0,helperText:n[i]&&a[i],label:s,margin:"normal",name:i,onBlur:c,onChange:o,value:r[i],variant:"outlined",autoComplete:"off"})}var ft=Object(f.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},addButton:{marginRight:e.spacing(1)},load:{marginTop:e.spacing(3)}}})),xt=r.a.forwardRef((function(e,t){return Object(U.jsx)(ot.a,Object(re.a)({direction:"up",ref:t},e))})),Ot=function(e){switch(e){case"name":return"\u0424\u0418\u041e";case"phone":return"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430";case"city":return"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u043e\u0440\u043e\u0434\u0430";case"address":return"\u0410\u0434\u0440\u0435\u0441";case"info":return"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e";default:return e}};function mt(e){var t,n,a,c,o,i=e.client,u=void 0===i?{}:i,j=e.open,b=e.handleShowEdit,f=ft(),O=new T.a,g=r.a.useState(!1),y=Object(d.a)(g,2),w=y[0],C=y[1],S=function(){b(!1)};return console.log("EDIT COMPONENT"),Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)(He.a,{fullScreen:!0,open:j,onClose:S,TransitionComponent:xt,children:[Object(U.jsxs)(xe.a,{className:f.appBar,children:[Object(U.jsxs)(Oe.a,{children:[Object(U.jsx)(B.a,{edge:"start",color:"inherit",onClick:S,"aria-label":"close",children:Object(U.jsx)(Ye.a,{})}),Object(U.jsx)(m.a,{variant:"h6",className:f.title,children:"CARGO"}),Object(U.jsx)(v.a,{type:"submit",form:"edit_client",autoFocus:!0,color:"inherit",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]}),w&&Object(U.jsx)(dt.a,{className:f.load})]}),Object(U.jsx)(x.a,{p:2,children:Object(U.jsx)(p.a,{initialValues:{name:null!==(t=u.name)&&void 0!==t?t:"",phone:null!==(n=u.phone)&&void 0!==n?n:"",city:null!==(a=u.city)&&void 0!==a?a:"",address:null!==(c=u.address)&&void 0!==c?c:"",info:null!==(o=u.info)&&void 0!==o?o:""},validationSchema:h.b().shape({name:h.c().min(1).max(100).required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0424\u0418\u041e"),phone:h.c().min(0).max(100).required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"),city:h.c().min(1).max(100).required("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u043e\u0440\u043e\u0434\u0430"),address:h.c().min(1).max(100).required("\u0410\u0434\u0440\u0435\u0441"),info:h.c().min(0).max(300)}),onSubmit:function(e,t){var n=t.setSubmitting;!function(e){C(!0),!w&&new Promise(function(){var t=Object(l.a)(s.a.mark((function t(n,a){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://".concat(window.location.hostname,"/client"),{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:O.get("sid")},body:JSON.stringify(Object(re.a)(Object(re.a)({},e),{},{_id:u._id}))});case 2:if(200!==(r=t.sent).status){t.next=9;break}return t.t0=n,t.next=7,r.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:return t.t2=a,t.next=12,r.json();case 12:return t.t3=t.sent,t.abrupt("return",(0,t.t2)(t.t3));case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()).then((function(e){S(),C(!1)})).catch((function(e){console.log(e),C(!1)}))}(e),n(!1)},children:function(e){var t=e.errors,n=e.handleBlur,a=e.handleChange,r=e.handleSubmit,c=(e.isSubmitting,e.touched),o=e.values;return Object(U.jsxs)("form",{onSubmit:r,id:"edit_client",children:[Object(U.jsxs)(x.a,{mb:3,children:[Object(U.jsx)(m.a,{color:"textPrimary",variant:"h4",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(U.jsx)(m.a,{color:"textSecondary",gutterBottom:!0,variant:"body1",children:u.name}),Object(U.jsx)(m.a,{color:"textSecondary",gutterBottom:!0,variant:"body1",children:"All fields are required"})]}),Object(U.jsx)(ct.a,{}),Object.keys(o).map((function(e){return Object(U.jsx)(pt,{props:{touched:c,errors:t,values:o,handleBlur:n,handleChange:a,key:e,label:Ot(e)}},e)}))]})}})})]})})}var gt=new T.a,vt=function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(s.a.mark((function e(n,a){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,"/order"),{method:"DELETE",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:gt.get("sid")},body:JSON.stringify({_id:t})});case 2:if(200!==(r=e.sent).status){e.next=5;break}return e.abrupt("return",n(t));case 5:return e.t0=a,e.next=8,r.json();case 8:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yt=n(392),wt=n(375),Ct=n(413),St=n(342),kt=n(393),Nt=Object(St.a)((function(e){return{root:{background:"rgb(63 81 181 / 25%)",padding:"0 8px"},formControl:{"&:before":{borderBottom:0},"&:after":{borderBottom:0},"&:hover:not(.Mui-disabled):before":{borderBottom:0}}}}));function Bt(e){var t=e.order,n=void 0===t?{}:t,a=Nt(),c=new T.a,o=[0,1,2,3,4],i=r.a.useState(+n.status),u=Object(d.a)(i,2),j=u[0],b=u[1],h=r.a.useState(!1),p=Object(d.a)(h,2),f=p[0],x=p[1];return Object(U.jsx)(U.Fragment,{children:f?Object(U.jsx)(kt.a,{width:160,height:32,animation:"wave"}):Object(U.jsx)("div",{className:a.root,children:Object(U.jsx)(wt.a,{children:Object(U.jsx)(Ct.a,{value:j,onChange:function(e){var t=+e.target.value;Boolean(o.includes(+t))&&t!==+n.status&&(x(!0),!f&&new Promise(function(){var e=Object(l.a)(s.a.mark((function e(a,r){var o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,"/order"),{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:c.get("sid")},body:JSON.stringify({status:t,order:n})});case 2:if(200!==(o=e.sent).status){e.next=9;break}return e.t0=a,e.next=7,o.json();case 7:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 9:return e.t2=r,e.next=12,o.json();case 12:return e.t3=e.sent,e.abrupt("return",(0,e.t2)(e.t3));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()).then((function(e){b(t),x(!1)})).catch((function(e){console.log(e),x(!1)})))},className:a.formControl,displayEmpty:!0,children:o.map((function(e){return Object(U.jsx)(yt.a,{value:e,children:window.formatStatus(e,n.title)},e)}))})})})})}var Tt=["children","classes","onClose"],Pt=Object(f.a)((function(e){return{button:{marginRight:e.spacing(1)},buttonGroup:{display:"flex",justifyContent:"space-between"},title:{textTransform:"uppercase"},nested:{marginLeft:e.spacing(1)},code:{alignSelf:"center",marginBottom:0}}})),Ft=Object(ze.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,n=e.classes,a=e.onClose,r=Object(ce.a)(e,Tt);return Object(U.jsxs)(Je.a,Object(re.a)(Object(re.a)({disableTypography:!0,className:n.root},r),{},{children:[Object(U.jsx)(m.a,{variant:"h6",children:t}),a?Object(U.jsx)(B.a,{"aria-label":"close",className:n.closeButton,onClick:a,children:Object(U.jsx)(Ye.a,{})}):null]}))})),Rt=Object(ze.a)((function(e){return{root:{padding:e.spacing(2)}}}))(Ve.a),Et=Object(ze.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(Ke.a);function Dt(e){var t=e.order,n=void 0===t?{}:t,a=e.handleClose,r=Pt();return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)("div",{children:Object(U.jsxs)(He.a,{maxWidth:"sm",fullWidth:!0,onClose:a,"aria-labelledby":"customized-dialog-title",open:!0,children:[Object(U.jsxs)(Ft,{className:r.title,id:"customized-dialog-title",onClose:a,children:[null===n||void 0===n?void 0:n.title," (",null===n||void 0===n?void 0:n.unit,")"]}),Object(U.jsxs)(Rt,{dividers:!0,children:[Object(U.jsxs)(x.a,{sx:{display:"flex",justifyContent:"space-between"},children:[Object(U.jsxs)(m.a,{gutterBottom:!0,className:r.code,children:["\u041a\u043e\u0434: ",Object(U.jsx)("span",{style:{background:"rgba(255, 0, 0, 0.7)",padding:"2px",borderRadius:"4px"},children:null===n||void 0===n?void 0:n.code})]}),Object(U.jsx)(Bt,{order:n})]}),Object(U.jsxs)(m.a,{gutterBottom:!0,children:["\u0412\u0435\u0441 \u0442\u043e\u0432\u0430\u0440\u0430: ",null===n||void 0===n?void 0:n.unit," (",null===n||void 0===n?void 0:n.weight,")"]}),Object(U.jsxs)(m.a,{gutterBottom:!0,children:["\u0421\u0442\u0430\u0442\u0443\u0441: ",window.formatStatus(null===n||void 0===n?void 0:n.status,null===n||void 0===n?void 0:n.title)]}),Object(U.jsxs)(m.a,{gutterBottom:!0,children:["\u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435:",Object(U.jsx)(m.a,{variant:"h6",component:"span",style:{color:(null===n||void 0===n?void 0:n.isClosed)?"red":"green"},children:n.isClosed?" \u0417\u0410\u041a\u0420\u042b\u0422":" \u041e\u0422\u041a\u0420\u042b\u0422"})]})]}),Object(U.jsxs)(Et,{className:r.buttonGroup,children:[Object(U.jsxs)(x.a,{sx:{display:"flex",flexWrap:"wrap"},children:[Object(U.jsx)(v.a,{onClick:function(){window.confirm("\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437 ".concat(null===n||void 0===n?void 0:n.title," (").concat(null===n||void 0===n?void 0:n.unit,")"))&&vt(n._id).then((function(e){})).catch((function(e){return console.log(e)}))},className:r.button,variant:"contained",color:"secondary",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(U.jsx)(v.a,{className:r.button,variant:"contained",color:"primary",children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"})]}),Object(U.jsx)(x.a,{sx:{display:"flex",alignSelf:"flex-end"},children:Object(U.jsx)(v.a,{onClick:a,variant:"outlined",color:"default",children:"Close"})})]})]})})})}var _t=["children","classes","onClose"],It=Object(f.a)((function(e){return{button:{marginRight:e.spacing(1)},buttonGroup:{display:"flex",justifyContent:"space-between"},title:{textTransform:"uppercase"},nested:{marginLeft:e.spacing(1)}}})),At=Object(ze.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,n=e.classes,a=e.onClose,r=Object(ce.a)(e,_t);return Object(U.jsxs)(Je.a,Object(re.a)(Object(re.a)({disableTypography:!0,className:n.root},r),{},{children:[Object(U.jsx)(m.a,{variant:"h6",children:t}),a?Object(U.jsx)(B.a,{"aria-label":"close",className:n.closeButton,onClick:a,children:Object(U.jsx)(Ye.a,{})}):null]}))})),Wt=Object(ze.a)((function(e){return{root:{padding:e.spacing(2)}}}))(Ve.a),qt=Object(ze.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(Ke.a),Lt=r.a.memo((function(e){var t=e.el,n=It(),a=r.a.useState(!1),c=Object(d.a)(a,2),o=c[0],i=c[1];return Object(U.jsxs)(U.Fragment,{children:[o&&Object(U.jsx)(Dt,{order:t,handleClose:function(){i(!1)}}),Object(U.jsxs)(ie.a,{button:!0,className:n.nested,onClick:function(){i(!0)},children:[Object(U.jsx)(Me.a,{children:Object(U.jsx)(nt.a,{})}),Object(U.jsx)(Ge.a,{primary:"".concat(null===t||void 0===t?void 0:t.title," (").concat(null===t||void 0===t?void 0:t.unit,")")}),Object(U.jsx)(m.a,{component:"span",color:(null===t||void 0===t?void 0:t.isClosed)?"primary":"secondary",children:t.isClosed?" \u0417\u0410\u041a\u0420\u042b\u0422":" \u041e\u0422\u041a\u0420\u042b\u0422"})]})]})}));function zt(e){var t=e.client,n=e.onlyshow,a=e.handleClose;console.log(t);var c=It(),o=r.a.useState(!1),i=Object(d.a)(o,2),s=i[0],l=i[1],u=r.a.useState(!1),j=Object(d.a)(u,2),b=j[0],h=j[1],p=function(e){return h(e)};return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("div",{children:b&&Object(U.jsx)(mt,{client:t,open:b,handleShowEdit:p})}),Object(U.jsx)("div",{children:Object(U.jsxs)(He.a,{maxWidth:"sm",fullWidth:!0,onClose:a,"aria-labelledby":"dialog-title",open:!0,children:[Object(U.jsx)(At,{className:c.title,id:"dialog-title",onClose:a,children:t.name}),Object(U.jsxs)(Wt,{dividers:!0,children:[Object(U.jsxs)(m.a,{gutterBottom:!0,children:["phone: ",t.phone]}),Object(U.jsxs)(m.a,{gutterBottom:!0,children:["address: ",t.city,", ",t.address]}),Object(U.jsxs)(m.a,{gutterBottom:!0,children:["code: ",t.code]}),Object(U.jsx)(m.a,{gutterBottom:!0,children:t.info}),Object(U.jsxs)(X.a,{children:[Object(U.jsxs)(ie.a,{button:!0,onClick:function(){return l((function(e){return!e}))},children:[Object(U.jsx)(Me.a,{children:Object(U.jsx)(rt.a,{})}),Object(U.jsx)(Ge.a,{primary:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b (".concat(t.orders.length,")")}),s?Object(U.jsx)(Xe.a,{}):Object(U.jsx)(et.a,{})]}),Object(U.jsx)(Ue.a,{in:s,timeout:"auto",unmountOnExit:!0,children:Object(U.jsx)(X.a,{component:"div",disablePadding:!0,children:t.orders.map((function(e){var t;return Object(U.jsx)(Lt,{el:e},null!==(t=null===e||void 0===e?void 0:e._id)&&void 0!==t?t:e)}))})})]})]}),!n&&Object(U.jsxs)(qt,{className:c.buttonGroup,children:[Object(U.jsxs)(x.a,{sx:{display:"flex",flexWrap:"wrap"},children:[Object(U.jsx)(v.a,{onClick:function(){return p(!0)},className:c.button,variant:"contained",color:"primary",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(U.jsx)(ht,{client:t})]}),Object(U.jsx)(x.a,{sx:{display:"flex",alignSelf:"flex-end"},children:Object(U.jsx)(v.a,{onClick:a,variant:"outlined",color:"default",children:"Close"})})]})]})})]})}var Mt=r.a.memo((function(e){var t,n=e.client,a=void 0===n?{}:n,c=r.a.useState(!1),o=Object(d.a)(c,2),i=o[0],s=o[1];return Object(U.jsxs)(U.Fragment,{children:[i&&Object(U.jsx)(Ae.a,{style:{display:"none"},children:Object(U.jsx)(We.a,{children:Object(U.jsx)(zt,{client:a,handleClose:function(){s(!1)}})})}),Object(U.jsxs)(Ae.a,{hover:!0,title:a.info||"\u041d\u0435\u0442 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438",onClick:function(){s(!0)},style:{cursor:"pointer"},children:[Object(U.jsx)(We.a,{children:Object(U.jsx)(x.a,{sx:{alignItems:"center",display:"flex"},children:Object(U.jsx)(m.a,{color:"textPrimary",variant:"body1",children:null===a||void 0===a?void 0:a.phone})})}),Object(U.jsx)(We.a,{children:null===a||void 0===a?void 0:a.name}),Object(U.jsx)(We.a,{children:null===a||void 0===a?void 0:a.city}),Object(U.jsx)(We.a,{children:null===a||void 0===a?void 0:a.address}),Object(U.jsxs)(We.a,{children:["0 / ",null===a||void 0===a||null===(t=a.orders)||void 0===t?void 0:t.length]}),Object(U.jsx)(We.a,{children:Object(U.jsx)(m.a,{style:{background:"rgb(255,0,0, 0.7)"},variant:"inherit",color:"textSecondary",children:null===a||void 0===a?void 0:a.code})}),Object(U.jsx)(We.a,{children:window.formatDate(null===a||void 0===a?void 0:a.createdAt)})]})]})})),Gt=function(e){return{type:D,payload:{order:e}}},Ht=["className","find","filter"],Ut=Object(f.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper}}})),Jt=function(e){var t=e.className,n=e.find,c=e.filter,o=Object(ce.a)(e,Ht),i=Ut(),u=r.a.useState(!1),j=Object(d.a)(u,2),b=j[0],h=j[1],p=Object(y.c)((function(e){return e.clients})),f=new T.a,O=Object(y.b)(),m=Object(a.useState)(10),g=Object(d.a)(m,2),v=g[0],w=g[1],C=Object(a.useState)(0),S=Object(d.a)(C,2),k=S[0],N=S[1];return r.a.useEffect((function(){return b||new Promise(function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,"/client"),{method:"GET",headers:{Authorization:f.get("sid")}});case 2:if(200!==(a=e.sent).status){e.next=9;break}return e.t0=t,e.next=7,a.json();case 7:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 9:return e.t2=n,e.next=12,a.json();case 12:return e.t3=e.sent,e.abrupt("return",(0,e.t2)(e.t3));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()).then((function(e){console.log(e),O(function(e){return{type:F,payload:{clients:e}}}(e))})).catch((function(e){console.log(e)})),function(){h(!0)}}),[]),Object(U.jsx)(De.a,Object(re.a)(Object(re.a)({className:Object(oe.a)(i.root,t)},o),{},{children:Object(U.jsxs)(x.a,{m:1,sx:{minWidth:1050},children:[Object(U.jsx)(Ee.a,{children:Object(U.jsxs)(_e.a,{children:[Object(U.jsx)(Ie.a,{children:Object(U.jsxs)(Ae.a,{children:[Object(U.jsx)(We.a,{children:"Phone"}),Object(U.jsx)(We.a,{children:"Name"}),Object(U.jsx)(We.a,{children:"\u0413\u043e\u0440\u043e\u0434"}),Object(U.jsx)(We.a,{children:"\u0410\u0434\u0440\u0435\u0441"}),Object(U.jsx)(We.a,{children:"Orders"}),Object(U.jsx)(We.a,{children:"CODE"}),Object(U.jsx)(We.a,{children:"Date"})]})}),Object(U.jsx)(qe.a,{children:p.filter((function(e){var t;return null===(t=e[c])||void 0===t?void 0:t.toLowerCase().includes(n.trim().toLowerCase())})).slice(v*k,k*v+v).map((function(e){return Object(U.jsx)(Mt,{client:e},e._id)}))})]})}),Object(U.jsx)(Le.a,{component:"div",count:p.length,onPageChange:function(e,t){N(t)},onRowsPerPageChange:function(e){w(e.target.value)},page:k,rowsPerPage:v,labelDisplayedRows:function(e){var t=e.from,n=e.to,a=e.count;return"".concat(t,"-").concat(n," \u0438\u0437 ").concat(-1!==a?a:"more than ".concat(n))},labelRowsPerPage:"\u041a\u043e\u043b-\u0432\u043e",rowsPerPageOptions:[5,10,25]})]})}))},Vt=r.a.memo(Jt),Kt=n(406),$t=n(203),Yt=n(407),Qt=Object(f.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},addButton:{marginRight:e.spacing(1)},load:{marginTop:e.spacing(3)}}})),Xt=r.a.forwardRef((function(e,t){return Object(U.jsx)(ot.a,Object(re.a)({direction:"up",ref:t},e))})),Zt=function(e){switch(e){case"name":return"\u0424\u0418\u041e";case"phone":return"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430";case"city":return"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u043e\u0440\u043e\u0434\u0430";case"address":return"\u0410\u0434\u0440\u0435\u0441";case"info":return"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e";default:return e}};function en(){var e=Qt(),t=r.a.useState(!1),n=Object(d.a)(t,2),a=n[0],c=n[1],o=new T.a,i=r.a.useState(!1),u=Object(d.a)(i,2),j=u[0],b=u[1],f=function(){c(!1)};return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(v.a,{onClick:function(){c(!0)},className:e.addButton,color:"primary",variant:"contained",children:"\u041d\u043e\u0432\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442"}),Object(U.jsxs)(He.a,{fullScreen:!0,open:a,onClose:f,TransitionComponent:Xt,children:[Object(U.jsxs)(xe.a,{className:e.appBar,children:[Object(U.jsxs)(Oe.a,{children:[Object(U.jsx)(B.a,{edge:"start",color:"inherit",onClick:f,"aria-label":"close",children:Object(U.jsx)(Ye.a,{})}),Object(U.jsx)(m.a,{variant:"h6",className:e.title,children:"CARGO"}),Object(U.jsx)(v.a,{type:"submit",form:"insert_client",autoFocus:!0,color:"inherit",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]}),j&&Object(U.jsx)(dt.a,{className:e.load})]}),Object(U.jsx)(x.a,{p:2,children:Object(U.jsx)(p.a,{initialValues:{name:"",phone:"",city:"",address:"",info:""},validationSchema:h.b().shape({name:h.c().min(1).max(100).required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0424\u0418\u041e"),phone:h.c().min(0).max(100).required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"),city:h.c().min(1).max(100).required("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u043e\u0440\u043e\u0434\u0430"),address:h.c().min(1).max(100).required("\u0410\u0434\u0440\u0435\u0441"),info:h.c().min(0).max(300)}),onSubmit:function(e,t){var n=t.setSubmitting;!function(e){b(!0),!j&&new Promise(function(){var t=Object(l.a)(s.a.mark((function t(n,a){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://".concat(window.location.hostname,"/client"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:o.get("sid")},body:JSON.stringify(e)});case 2:if(200!==(r=t.sent).status){t.next=9;break}return t.t0=n,t.next=7,r.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:return t.t2=a,t.next=12,r.json();case 12:return t.t3=t.sent,t.abrupt("return",(0,t.t2)(t.t3));case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()).then((function(e){f(),b(!1)})).catch((function(e){console.log(e),b(!1)}))}(e),n(!1)},children:function(e){var t=e.errors,n=e.handleBlur,a=e.handleChange,r=e.handleSubmit,c=e.touched,o=e.values;return Object(U.jsxs)("form",{onSubmit:r,id:"insert_client",children:[Object(U.jsxs)(x.a,{mb:3,children:[Object(U.jsx)(m.a,{color:"textPrimary",variant:"h3",children:"\u041d\u043e\u0432\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442"}),Object(U.jsx)(m.a,{color:"textSecondary",gutterBottom:!0,variant:"body1",children:"All fields are required"})]}),Object(U.jsx)(ct.a,{}),Object.keys(o).map((function(e){return Object(U.jsx)(pt,{props:{touched:c,errors:t,values:o,handleBlur:n,handleChange:a,key:e,label:Zt(e)}},e)}))]})}})})]})]})}var tn=["className","filter","find","handleFindInput","handleFilter"],nn=Object(f.a)((function(e){return{root:{},importButton:{marginRight:e.spacing(1)},exportButton:{marginRight:e.spacing(1)},addButton:{marginRight:e.spacing(1)},formControl:{"&:before":{borderBottom:0},"&:after":{borderBottom:0},"&:hover:not(.Mui-disabled):before":{borderBottom:0}}}})),an=["phone","name","city","address","code"],rn=function(e){var t=e.className,n=e.filter,a=e.find,r=e.handleFindInput,c=e.handleFilter,o=Object(ce.a)(e,tn),i=nn();return Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)("div",Object(re.a)(Object(re.a)({className:Object(oe.a)(i.root,t)},o),{},{children:[Object(U.jsxs)(x.a,{display:"flex",justifyContent:"flex-end",children:[Object(U.jsx)(v.a,{className:i.exportButton,children:"Import"}),Object(U.jsx)(v.a,{className:i.exportButton,children:"Export"}),Object(U.jsx)(en,{})]}),Object(U.jsx)(x.a,{mt:3,children:Object(U.jsx)(De.a,{children:Object(U.jsx)(Kt.a,{children:Object(U.jsx)(x.a,{sx:{display:"flex"},children:Object(U.jsx)(g.a,{fullWidth:!0,onChange:r,value:a,size:"small",InputProps:{startAdornment:Object(U.jsx)(w.a,{position:"start",children:Object(U.jsx)($t.a,{fontSize:"small",color:"action",children:Object(U.jsx)(Yt.a,{})})}),endAdornment:Object(U.jsx)(w.a,{position:"end",children:Object(U.jsx)(wt.a,{children:Object(U.jsx)(Ct.a,{value:n,onChange:c,className:i.formControl,displayEmpty:!0,children:an.map((function(e){return Object(U.jsx)(yt.a,{value:e,children:e},e)}))})})})},placeholder:"\u041f\u043e\u0438\u0441\u043a \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432",variant:"outlined"})})})})})]}))})},cn=r.a.memo(rn,(function(e,t){return e.find!==t.find&&e.filter!==t.filter})),on=Object(f.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),sn=function(){var e=on(),t=r.a.useState(""),n=Object(d.a)(t,2),a=n[0],c=n[1],o=r.a.useState("phone"),i=Object(d.a)(o,2),s=i[0],l=i[1];return Object(U.jsx)(Fe,{className:e.root,title:"\u041a\u043b\u0438\u0435\u043d\u0442\u044b",children:Object(U.jsxs)(O.a,{maxWidth:!1,children:[Object(U.jsx)(cn,{filter:s,find:a,handleFindInput:function(e){c(e.target.value)},handleFilter:function(e){l(e.target.value)}}),Object(U.jsx)(x.a,{mt:3,children:Object(U.jsx)(Vt,{filter:s,find:a})})]})})},ln=n(408),dn=r.a.memo((function(e){var t=e.props,n=t.touched,a=t.errors,r=t.values,c=t.handleBlur,o=t.handleChange,i=t.key,s=t.label;return Object(U.jsx)(ln.a,{item:!0,xs:12,sm:6,md:6,children:Object(U.jsx)(g.a,{error:Boolean(n[i]&&a[i]),fullWidth:!0,helperText:n[i]&&a[i],label:s,margin:"normal",name:i,onBlur:c,onChange:o,value:r[i],variant:"outlined",autoComplete:"off"})})})),un=n(199),jn=n.n(un),bn=n(19),hn=n(20),pn=n(33),fn=n(35),xn=function(e){Object(pn.a)(n,e);var t=Object(fn.a)(n);function n(){var e;Object(bn.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,thumb:void 0},e}return Object(hn.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.thumb!==t.thumb}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.file&&this.setState({loading:!0},(function(){var n=new FileReader;n.onloadend=function(){t.setState({loading:!1,thumb:n.result})},n.readAsDataURL(e.file)}))}},{key:"render",value:function(){var e=this.props.file,t=this.state,n=t.loading,a=t.thumb;return e?n?Object(U.jsx)("p",{children:"loading..."}):Object(U.jsx)("img",{style:{padding:"8px"},src:a,alt:e.name,width:"20%"}):null}}]),n}(r.a.Component),On=Object(f.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},addButton:{marginRight:e.spacing(1)},load:{marginTop:e.spacing(3)},input:{display:"none"}}})),mn=r.a.forwardRef((function(e,t){return Object(U.jsx)(ot.a,Object(re.a)({direction:"up",ref:t},e))})),gn=function(e){switch(e){case"name":return"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0430";case"phone":return"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430";case"responsible":return"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0435 \u043b\u0438\u0446\u043e";case"city":return"\u0413\u043e\u0440\u043e\u0434";case"address":return"\u0410\u0434\u0440\u0435\u0441";case"info":return"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e";case"phone2":return"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440";case"url":return"\u0421\u0441\u044b\u043b\u043a\u0430 \u0434\u043b\u044f \u043d\u0430\u0432\u0438\u0433\u0430\u0442\u043e\u0440\u0430";default:return e}},vn=r.a.memo((function(){var e=On(),t=r.a.useState(!1),n=Object(d.a)(t,2),a=n[0],c=n[1],o=new T.a,i=r.a.useState(!1),u=Object(d.a)(i,2),j=u[0],b=u[1],f=function(){c(!1)};return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(v.a,{onClick:function(){c(!0)},className:e.addButton,color:"primary",variant:"contained",children:"\u041d\u043e\u0432\u044b\u0439 \u043c\u0430\u0433\u0430\u0437\u0438\u043d"}),Object(U.jsxs)(He.a,{fullScreen:!0,open:a,onClose:f,TransitionComponent:mn,children:[Object(U.jsxs)(xe.a,{className:e.appBar,children:[Object(U.jsxs)(Oe.a,{children:[Object(U.jsx)(B.a,{edge:"start",color:"inherit",onClick:f,"aria-label":"close",children:Object(U.jsx)(Ye.a,{})}),Object(U.jsx)(m.a,{variant:"h6",className:e.title,children:"CARGO"}),Object(U.jsx)(v.a,{type:"submit",form:"insert_shop",autoFocus:!0,color:"inherit",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]}),j&&Object(U.jsx)(dt.a,{className:e.load})]}),Object(U.jsx)(x.a,{p:2,children:Object(U.jsx)(p.a,{initialValues:{name:"",responsible:"",phone:"",phone2:"",city:"",address:"",images:[],url:"",info:""},validationSchema:h.b().shape({name:h.c().min(1).max(100).required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0430"),responsible:h.c().min(1).max(100).required("\u0418\u043c\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e"),phone:h.c().min(0).max(100).required("\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"),phone2:h.c().min(0).max(100),city:h.c().min(1).max(100).required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434"),address:h.c().min(1).max(100).required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441"),images:h.a().required("\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"),url:h.c().min(1).max(100),info:h.c().min(0).max(300)}),onSubmit:function(e,t){var n=t.setSubmitting;!function(e){b(!0),!j&&new Promise(function(){var t=Object(l.a)(s.a.mark((function t(n,a){var r,c,i,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=new FormData,c=0;c<e.images.length;c++)r.append("images",e.images[c]);for(i in delete e.images,e)r.append(i,e[i]);return t.next=6,fetch("http://".concat(window.location.hostname,"/shop"),{method:"POST",headers:{Authorization:o.get("sid")},body:r});case 6:if(200!==(l=t.sent).status){t.next=13;break}return t.t0=n,t.next=11,l.json();case 11:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 13:return t.t2=a,t.next=16,l.json();case 16:return t.t3=t.sent,t.abrupt("return",(0,t.t2)(t.t3));case 18:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()).then((function(e){f(),b(!1)})).catch((function(e){console.log(e),b(!1)}))}(e),n(!1)},children:function(e){var t=e.errors,n=e.handleBlur,a=e.handleChange,r=e.handleSubmit,c=e.setFieldValue,o=e.touched,i=e.values;return Object(U.jsxs)("form",{onSubmit:r,id:"insert_shop",children:[Object(U.jsxs)(x.a,{mb:3,children:[Object(U.jsx)(m.a,{color:"textPrimary",variant:"h3",children:"\u041d\u043e\u0432\u044b\u0439 \u043c\u0430\u0433\u0430\u0437\u0438\u043d"}),Object(U.jsx)(m.a,{color:"textSecondary",gutterBottom:!0,variant:"body1",children:"All fields are required"})]}),Object(U.jsx)(ct.a,{}),Object(U.jsx)(ln.a,{container:!0,spacing:1,children:Object.keys(i).filter((function(e){return"images"!==e})).map((function(e){return Object(U.jsx)(dn,{props:{touched:o,errors:t,values:i,handleBlur:n,handleChange:a,key:e,label:gn(e)}},e)}))}),Object(U.jsx)("input",{multiple:!0,id:"upload-images",name:"images",type:"file",style:{display:"none"},onChange:function(e){c("images",e.currentTarget.files)}}),Object(U.jsx)("div",{children:Object(U.jsx)("label",{htmlFor:"upload-images",children:Object(U.jsxs)(v.a,{color:"default","aria-label":"upload picture",component:"span",children:[Object(U.jsx)(jn.a,{}),"\xa0 \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"]})})}),i.images&&Object.keys(i.images).map((function(e){return Object(U.jsx)(xn,{file:i.images[e]},i.images[e].name)}))]})}})})]})]})})),yn=["className","filter","find","handleFindInput","handleFilter"],wn=Object(f.a)((function(e){return{root:{},importButton:{marginRight:e.spacing(1)},exportButton:{marginRight:e.spacing(1)},addButton:{marginRight:e.spacing(1)},formControl:{"&:before":{borderBottom:0},"&:after":{borderBottom:0},"&:hover:not(.Mui-disabled):before":{borderBottom:0}}}})),Cn=["phone","name","address","responsible"],Sn=function(e){var t=e.className,n=e.filter,a=e.find,r=e.handleFindInput,c=e.handleFilter,o=Object(ce.a)(e,yn),i=wn();return Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)("div",Object(re.a)(Object(re.a)({className:Object(oe.a)(i.root,t)},o),{},{children:[Object(U.jsxs)(x.a,{display:"flex",justifyContent:"flex-end",children:[Object(U.jsx)(v.a,{className:i.exportButton,children:"Import"}),Object(U.jsx)(v.a,{className:i.exportButton,children:"Export"}),Object(U.jsx)(vn,{})]}),Object(U.jsx)(x.a,{mt:3,children:Object(U.jsx)(De.a,{children:Object(U.jsx)(Kt.a,{children:Object(U.jsx)(x.a,{sx:{display:"flex"},children:Object(U.jsx)(g.a,{fullWidth:!0,onChange:r,value:a,size:"small",InputProps:{startAdornment:Object(U.jsx)(w.a,{position:"start",children:Object(U.jsx)($t.a,{fontSize:"small",color:"action",children:Object(U.jsx)(Yt.a,{})})}),endAdornment:Object(U.jsx)(w.a,{position:"end",children:Object(U.jsx)(wt.a,{children:Object(U.jsx)(Ct.a,{value:n,onChange:c,className:i.formControl,displayEmpty:!0,children:Cn.map((function(e){return Object(U.jsx)(yt.a,{value:e,children:e},e)}))})})})},placeholder:"\u041f\u043e\u0438\u0441\u043a \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u043e\u0432",variant:"outlined"})})})})})]}))})},kn=r.a.memo(Sn,(function(e,t){return e.find!==t.find&&e.filter!==t.filter})),Nn=function(e){return{type:W,payload:{order:e}}},Bn=n(200),Tn=n.n(Bn),Pn=Object(f.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},addButton:{marginRight:e.spacing(1)},load:{marginTop:e.spacing(3)}}})),Fn=r.a.forwardRef((function(e,t){return Object(U.jsx)(ot.a,Object(re.a)({direction:"up",ref:t},e))})),Rn=function(e){switch(e){case"name":return"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0430";case"phone":return"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430";case"responsible":return"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0435 \u043b\u0438\u0446\u043e";case"city":return"\u0413\u043e\u0440\u043e\u0434";case"address":return"\u0410\u0434\u0440\u0435\u0441";case"info":return"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e";case"phone2":return"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440";case"url":return"\u0421\u0441\u044b\u043b\u043a\u0430 \u0434\u043b\u044f \u043d\u0430\u0432\u0438\u0433\u0430\u0442\u043e\u0440\u0430";default:return e}};function En(e){var t,n,a,c,o,i,u,j,b,f=e.shop,O=void 0===f?{}:f,g=e.open,y=e.handleShowEdit,w=Pn(),C=new T.a,S=r.a.useState(!1),k=Object(d.a)(S,2),N=k[0],P=k[1];return console.log("EDIT SHOP"),Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)(He.a,{fullScreen:!0,open:g,onClose:function(){return y(!1)},TransitionComponent:Fn,children:[Object(U.jsxs)(xe.a,{className:w.appBar,children:[Object(U.jsxs)(Oe.a,{children:[Object(U.jsx)(B.a,{edge:"start",color:"inherit",onClick:function(){return y(!1)},"aria-label":"close",children:Object(U.jsx)(Ye.a,{})}),Object(U.jsx)(m.a,{variant:"h6",className:w.title,children:"CARGO"}),Object(U.jsx)(v.a,{type:"submit",form:"edit_shop",autoFocus:!0,color:"inherit",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]}),N&&Object(U.jsx)(dt.a,{className:w.load})]}),Object(U.jsx)(x.a,{p:2,children:Object(U.jsx)(p.a,{initialValues:{name:null!==(t=O.name)&&void 0!==t?t:"",responsible:null!==(n=O.responsible)&&void 0!==n?n:"",phone:null!==(a=O.phone)&&void 0!==a?a:"",phone2:null!==(c=O.phone2)&&void 0!==c?c:"",city:null!==(o=O.city)&&void 0!==o?o:"",address:null!==(i=O.address)&&void 0!==i?i:"",images:null!==(u=O.images)&&void 0!==u?u:[],url:null!==(j=O.url)&&void 0!==j?j:"",info:null!==(b=O.info)&&void 0!==b?b:""},validationSchema:h.b().shape({name:h.c().min(1).max(100).required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0430"),responsible:h.c().min(1).max(100).required("\u0418\u043c\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e"),phone:h.c().min(0).max(100).required("\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"),phone2:h.c().min(0).max(100),address:h.c().min(1).max(100).required("\u0410\u0434\u0440\u0435\u0441"),images:h.a().required("\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"),url:h.c().min(1).max(100),info:h.c().min(0).max(300)}),onSubmit:function(e,t){var n=t.setSubmitting;!function(e){P(!0),!N&&new Promise(function(){var t=Object(l.a)(s.a.mark((function t(n,a){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://".concat(window.location.hostname,"/shop"),{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:C.get("sid")},body:JSON.stringify(Object(re.a)(Object(re.a)({},e),{},{_id:O._id}))});case 2:if(200!==(r=t.sent).status){t.next=9;break}return t.t0=n,t.next=7,r.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:return t.t2=a,t.next=12,r.json();case 12:return t.t3=t.sent,t.abrupt("return",(0,t.t2)(t.t3));case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()).then((function(e){y(!1),P(!1)})).catch((function(e){console.log(e),P(!1)}))}(e),n(!1)},children:function(e){var t=e.errors,n=e.handleBlur,a=e.handleChange,r=e.handleSubmit,c=e.touched,o=e.values;return Object(U.jsxs)("form",{onSubmit:r,id:"edit_shop",children:[Object(U.jsxs)(x.a,{mb:3,children:[Object(U.jsx)(m.a,{color:"textPrimary",variant:"h4",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(U.jsx)(m.a,{color:"textSecondary",gutterBottom:!0,variant:"body1",children:O.name}),Object(U.jsx)(m.a,{color:"textSecondary",gutterBottom:!0,variant:"body1",children:"All fields are required"})]}),Object(U.jsx)(ct.a,{}),Object(U.jsx)(ln.a,{container:!0,spacing:1,children:Object.keys(o).filter((function(e){return"images"!==e})).map((function(e){return Object(U.jsx)(dn,{props:{touched:c,errors:t,values:o,handleBlur:n,handleChange:a,key:e,label:Rn(e)}},e)}))})]})}})})]})})}var Dn=["children","classes","onClose"],_n=Object(f.a)((function(e){return{button:{marginRight:e.spacing(1)},buttonGroup:{display:"flex",justifyContent:"space-between"},title:{textTransform:"uppercase"},nested:{marginLeft:e.spacing(1)}}})),In=r.a.memo((function(e){var t=e.el,n=_n(),a=r.a.useState(!1),c=Object(d.a)(a,2),o=c[0],i=c[1];return Object(U.jsxs)(U.Fragment,{children:[o&&Object(U.jsx)(zt,{client:t,onlyshow:!0,handleClose:function(){i(!1)}}),Object(U.jsxs)(ie.a,{button:!0,className:n.nested,onClick:function(){i(!0)},children:[Object(U.jsx)(Me.a,{children:Object(U.jsx)(Tn.a,{})}),Object(U.jsx)(Ge.a,{primary:"".concat(null===t||void 0===t?void 0:t.name," ( ").concat(null===t||void 0===t?void 0:t.code," )")})]})]})})),An=Object(ze.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,n=e.classes,a=e.onClose,r=Object(ce.a)(e,Dn);return Object(U.jsxs)(Je.a,Object(re.a)(Object(re.a)({disableTypography:!0,className:n.root},r),{},{children:[Object(U.jsx)(m.a,{variant:"h6",children:t}),a?Object(U.jsx)(B.a,{"aria-label":"close",className:n.closeButton,onClick:a,children:Object(U.jsx)(Ye.a,{})}):null]}))})),Wn=Object(ze.a)((function(e){return{root:{padding:e.spacing(2)}}}))(Ve.a),qn=Object(ze.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(Ke.a);function Ln(e){var t,n,a=e.shop,c=e.handleClose,o=_n(),i=r.a.useState(!1),s=Object(d.a)(i,2),l=s[0],u=s[1],j=r.a.useState(!1),b=Object(d.a)(j,2),h=b[0],p=b[1],f=function(e){return p(e)};return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("div",{children:h&&Object(U.jsx)(En,{shop:a,open:h,handleShowEdit:f})}),Object(U.jsx)("div",{children:Object(U.jsxs)(He.a,{maxWidth:"sm",fullWidth:!0,onClose:c,"aria-labelledby":"customized-dialog-title",open:!0,children:[Object(U.jsx)(An,{className:o.title,id:"customized-dialog-title",onClose:c,children:a.name}),Object(U.jsxs)(Wn,{dividers:!0,children:[Object(U.jsxs)(m.a,{gutterBottom:!0,children:["phone: ",a.phone]}),a.phone2&&Object(U.jsxs)(m.a,{gutterBottom:!0,children:["\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440: ",a.phone2]}),Object(U.jsxs)(m.a,{gutterBottom:!0,children:["address: ",a.address]}),Object(U.jsxs)(m.a,{gutterBottom:!0,children:["\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439: ",a.responsible]}),Object(U.jsx)(m.a,{gutterBottom:!0,children:a.info}),Object(U.jsxs)(X.a,{children:[Object(U.jsxs)(ie.a,{button:!0,onClick:function(){return u((function(e){return!e}))},children:[Object(U.jsx)(Me.a,{children:Object(U.jsx)(rt.a,{})}),Object(U.jsx)(Ge.a,{primary:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u044b (".concat(null===a||void 0===a||null===(t=a.clients)||void 0===t?void 0:t.length,")")}),l?Object(U.jsx)(Xe.a,{}):Object(U.jsx)(et.a,{})]}),Object(U.jsx)(Ue.a,{in:l,timeout:"auto",unmountOnExit:!0,children:Object(U.jsx)(X.a,{component:"div",disablePadding:!0,children:null===a||void 0===a||null===(n=a.clients)||void 0===n?void 0:n.map((function(e){var t;return Object(U.jsx)(In,{el:e},null!==(t=null===e||void 0===e?void 0:e._id)&&void 0!==t?t:e)}))})})]})]}),Object(U.jsxs)(qn,{className:o.buttonGroup,children:[Object(U.jsxs)(x.a,{sx:{display:"flex",flexWrap:"wrap"},children:[Object(U.jsx)(v.a,{onClick:function(){return f(!0)},className:o.button,variant:"contained",color:"primary",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(U.jsx)(ht,{shop:a})]}),Object(U.jsx)(x.a,{sx:{alignSelf:"flex-end"},children:Object(U.jsx)(v.a,{onClick:c,variant:"outlined",color:"default",children:"Save"})})]})]})})]})}var zn=Object(f.a)((function(e){return{root:{padding:0},caption:{display:"flex",justifyContent:"space-between"}}}));function Mn(e){var t=e.shop,n=void 0===t?{}:t,a=zn(),c=r.a.useState(!1),o=Object(d.a)(c,2),i=o[0],s=o[1],l=function(e){s(e)};return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(x.a,{onClick:function(){return l(!0)},sx:{cursor:"pointer"},children:Object(U.jsx)("img",{height:180,width:"100%",title:(null===n||void 0===n?void 0:n.info)||"\u041d\u0435\u0442 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438",alt:null===n||void 0===n?void 0:n.name,src:"https://retaildesignblog.net/wp-content/uploads/2017/10/Istinyepark-Karaca-Store-by-YK-Mimarl%C4%B1k-Istanbul-Turkey.jpg"})}),Object(U.jsxs)(x.a,{pr:2,className:a.root,children:[Object(U.jsx)(m.a,{gutterBottom:!0,variant:"body2",children:null===n||void 0===n?void 0:n.name}),Object(U.jsxs)(x.a,{className:a.caption,children:[Object(U.jsxs)(x.a,{children:[Object(U.jsx)(m.a,{display:"block",variant:"caption",color:"textSecondary",children:null===n||void 0===n?void 0:n.phone}),Object(U.jsx)(m.a,{variant:"caption",color:"textSecondary",children:"".concat(null===n||void 0===n?void 0:n.responsible," \u2022 ").concat(null===n||void 0===n?void 0:n.address)})]}),Object(U.jsx)(x.a,{sx:{alignSelf:"flex-end",background:"rgb(255,0,0, 0.7)",borderRadius:"3px"},children:Object(U.jsx)(m.a,{variant:"caption",color:"textSecondary",children:null===n||void 0===n?void 0:n.code})})]})]}),i&&Object(U.jsx)(Ln,{shop:n,handleClose:function(){return l(!1)}})]})}function Gn(e){var t=e.loading,n=void 0!==t&&t,a=e.shops,r=void 0===a?[]:a;return Object(U.jsx)(ln.a,{container:!0,spacing:1,wrap:"wrap",children:!n&&r.map((function(e,t){return Object(U.jsx)(ln.a,{item:!0,xs:12,sm:4,md:3,lg:3,xl:2,children:e?Object(U.jsx)(Mn,{shop:e}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(kt.a,{variant:"rect",height:118}),Object(U.jsxs)(x.a,{pt:.5,children:[Object(U.jsx)(kt.a,{}),Object(U.jsx)(kt.a,{width:"60%"})]})]})},t)}))})}function Hn(e){var t=e.filter,n=e.find,a=r.a.useState(!1),c=Object(d.a)(a,2),o=c[0],i=c[1],u=Object(y.c)((function(e){return e.shops})),j=r.a.useMemo((function(){return new T.a}),[]),b=Object(y.b)();return console.log("SHOPLIST"),r.a.useEffect((function(){return o||new Promise(function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,"/shop"),{method:"GET",headers:{Authorization:j.get("sid")}});case 2:if(200!==(a=e.sent).status){e.next=9;break}return e.t0=t,e.next=7,a.json();case 7:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 9:return e.t2=n,e.next=12,a.json();case 12:return e.t3=e.sent,e.abrupt("return",(0,e.t2)(e.t3));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()).then((function(e){console.log(e),b(function(e){return{type:_,payload:{shops:e}}}(e))})).catch((function(e){console.log(e)})),function(){i(!0)}}),[o,j,b]),Object(U.jsx)(x.a,{overflow:"hidden",children:Object(U.jsx)(Gn,{shops:u.filter((function(e){return e[t].toLowerCase().includes(n.trim().toLowerCase())}))})})}var Un=Object(f.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),Jn=function(){var e=Un(),t=r.a.useState(""),n=Object(d.a)(t,2),a=n[0],c=n[1],o=r.a.useState("phone"),i=Object(d.a)(o,2),s=i[0],l=i[1];return Object(U.jsx)(Fe,{className:e.root,title:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d\u044b",children:Object(U.jsxs)(O.a,{maxWidth:!1,children:[Object(U.jsx)(kn,{filter:s,find:a,handleFindInput:function(e){c(e.target.value)},handleFilter:function(e){l(e.target.value)}}),Object(U.jsx)(x.a,{mt:3,children:Object(U.jsx)(Hn,{filter:s,find:a})})]})})},Vn=r.a.memo((function(e){var t=e.order,n=void 0===t?{}:t;console.log("ORDER");var a=r.a.useState(!1),c=Object(d.a)(a,2),o=c[0],i=c[1];return Object(U.jsxs)(U.Fragment,{children:[o&&Object(U.jsx)(Ae.a,{style:{display:"none"},children:Object(U.jsx)(We.a,{children:Object(U.jsx)(Dt,{order:n,handleClose:function(){i(!1)}})})}),Object(U.jsxs)(Ae.a,{hover:!0,title:n.info||"\u041d\u0435\u0442 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438",onClick:function(){i(!0)},style:{cursor:"pointer"},children:[Object(U.jsx)(We.a,{children:Object(U.jsx)(x.a,{sx:{alignItems:"center",display:"flex"},children:Object(U.jsx)(m.a,{color:"textPrimary",variant:"body1",children:null===n||void 0===n?void 0:n.code})})}),Object(U.jsx)(We.a,{children:null===n||void 0===n?void 0:n.unit}),Object(U.jsx)(We.a,{children:window.formatStatus(null===n||void 0===n?void 0:n.status,null===n||void 0===n?void 0:n.title)}),Object(U.jsx)(We.a,{children:(null===n||void 0===n?void 0:n.isClosed)?"\u0417\u0410\u041a\u0420\u042b\u0422":"\u041e\u0422\u041a\u0420\u042b\u0422"}),Object(U.jsx)(We.a,{children:window.formatDate(null===n||void 0===n?void 0:n.createdAt)})]})]})})),Kn=["className","find","filter"],$n=Object(f.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper}}})),Yn=function(e){var t=e.className,n=e.find,c=e.filter,o=Object(ce.a)(e,Kn),i=$n(),u=r.a.useState(!1),j=Object(d.a)(u,2),b=j[0],h=j[1],p=Object(y.c)((function(e){return e.orders})),f=new T.a,O=Object(y.b)(),m=Object(a.useState)(10),g=Object(d.a)(m,2),v=g[0],w=g[1],C=Object(a.useState)(0),S=Object(d.a)(C,2),k=S[0],N=S[1];return r.a.useEffect((function(){return b||new Promise(function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(window.location.hostname,"/order"),{method:"GET",headers:{Authorization:f.get("sid")}});case 2:if(200!==(a=e.sent).status){e.next=9;break}return e.t0=t,e.next=7,a.json();case 7:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 9:return e.t2=n,e.next=12,a.json();case 12:return e.t3=e.sent,e.abrupt("return",(0,e.t2)(e.t3));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()).then((function(e){console.log(e),O(function(e){return{type:q,payload:{orders:e}}}(e))})).catch((function(e){console.log(e)})),function(){h(!0)}}),[]),Object(U.jsx)(De.a,Object(re.a)(Object(re.a)({className:Object(oe.a)(i.root,t)},o),{},{children:Object(U.jsxs)(x.a,{m:1,sx:{minWidth:1050},children:[Object(U.jsx)(Ee.a,{children:Object(U.jsxs)(_e.a,{children:[Object(U.jsx)(Ie.a,{children:Object(U.jsxs)(Ae.a,{children:[Object(U.jsx)(We.a,{children:"\u041a\u043e\u0434"}),Object(U.jsx)(We.a,{children:"\u0412\u0435\u0441"}),Object(U.jsx)(We.a,{children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),Object(U.jsx)(We.a,{children:"\u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435"}),Object(U.jsx)(We.a,{children:"Date"})]})}),Object(U.jsx)(qe.a,{children:p.filter((function(e){var t;return null===(t=e[c])||void 0===t?void 0:t.toLowerCase().includes(n.trim().toLowerCase())})).slice(v*k,k*v+v).map((function(e){return Object(U.jsx)(Vn,{order:e},e._id)}))})]})}),Object(U.jsx)(Le.a,{component:"div",count:p.length,onPageChange:function(e,t){N(t)},onRowsPerPageChange:function(e){w(e.target.value)},page:k,rowsPerPage:v,labelDisplayedRows:function(e){var t=e.from,n=e.to,a=e.count;return"".concat(t,"-").concat(n," \u0438\u0437 ").concat(-1!==a?a:"more than ".concat(n))},labelRowsPerPage:"\u041a\u043e\u043b-\u0432\u043e",rowsPerPageOptions:[5,10,25]})]})}))},Qn=r.a.memo(Yn),Xn=["className","filter","find","handleFindInput","handleFilter"],Zn=Object(f.a)((function(e){return{root:{},importButton:{marginRight:e.spacing(1)},exportButton:{marginRight:e.spacing(1)},addButton:{marginRight:e.spacing(1)},formControl:{"&:before":{borderBottom:0},"&:after":{borderBottom:0},"&:hover:not(.Mui-disabled):before":{borderBottom:0}}}})),ea=["code","status","createdAt"],ta=function(e){var t=e.className,n=e.filter,a=e.find,r=e.handleFindInput,c=e.handleFilter,o=Object(ce.a)(e,Xn),i=Zn();return Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)("div",Object(re.a)(Object(re.a)({className:Object(oe.a)(i.root,t)},o),{},{children:[Object(U.jsxs)(x.a,{display:"flex",justifyContent:"flex-end",children:[Object(U.jsx)(v.a,{className:i.exportButton,children:"Import"}),Object(U.jsx)(v.a,{className:i.exportButton,children:"Export"}),Object(U.jsx)(ht,{})]}),Object(U.jsx)(x.a,{mt:3,children:Object(U.jsx)(De.a,{children:Object(U.jsx)(Kt.a,{children:Object(U.jsx)(x.a,{sx:{display:"flex"},children:Object(U.jsx)(g.a,{fullWidth:!0,onChange:r,value:a,size:"small",InputProps:{startAdornment:Object(U.jsx)(w.a,{position:"start",children:Object(U.jsx)($t.a,{fontSize:"small",color:"action",children:Object(U.jsx)(Yt.a,{})})}),endAdornment:Object(U.jsx)(w.a,{position:"end",children:Object(U.jsx)(wt.a,{children:Object(U.jsx)(Ct.a,{value:n,onChange:c,className:i.formControl,displayEmpty:!0,children:ea.map((function(e){return Object(U.jsx)(yt.a,{value:e,children:e},e)}))})})})},placeholder:"\u041f\u043e\u0438\u0441\u043a \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432",variant:"outlined"})})})})})]}))})},na=Object(f.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),aa=function(){var e=na(),t=r.a.useState(""),n=Object(d.a)(t,2),a=n[0],c=n[1],o=r.a.useState("code"),i=Object(d.a)(o,2),s=i[0],l=i[1];return Object(U.jsx)(Fe,{className:e.root,title:"\u0417\u0430\u043a\u0430\u0437\u044b",children:Object(U.jsxs)(O.a,{maxWidth:!1,children:[Object(U.jsx)(ta,{filter:s,find:a,handleFindInput:function(e){c(e.target.value)},handleFilter:function(e){l(e.target.value)}}),Object(U.jsx)(x.a,{mt:3,children:Object(U.jsx)(Qn,{filter:s,find:a})})]})})};var ra=function(){var e,t,n=Object(y.b)();function a(){return r.apply(this,arguments)}function r(){return(r=Object(l.a)(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearInterval(e),n.next=3,new WebSocket("ws://".concat(window.location.hostname));case 3:(t=n.sent).onopen=c,t.onmessage=o,t.onclose=i,t.onerror=d,e=setInterval((function(){t.readyState||a()}),1e4);case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function c(e){console.log("[open] \u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e")}function o(e){console.log(e);var t,a,r,c,o=JSON.parse(e.data),i=o.type,s=o.payload;switch(console.log(i,s),i){case R:n((c=s.data,{type:R,payload:{client:c}}));break;case E:n(function(e){return{type:E,payload:{client:e}}}(s.data));break;case I:n((r=s.data,{type:I,payload:{shop:r}}));break;case A:n(function(e){return{type:A,payload:{shop:e}}}(s.data));break;case L:n((a=s.data,{type:L,payload:{order:a}})),n(Gt(s)),n(Nn(s));break;case z:n((t=s.data,{type:z,payload:{_id:t}})),n(Gt(s)),n(Nn(s)),n({type:"ADD_NOTI",payload:{data:"".concat(s.code," \u0431\u044b\u043b \u0443\u0434\u0430\u043b\u0435\u043d")}});break;case M:n(function(e){return{type:M,payload:{order:e}}}(s.data)),n(Gt(s)),n(Nn(s))}}function i(e){e.wasClean?console.log("[close] \u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u043e \u0447\u0438\u0441\u0442\u043e, \u043a\u043e\u0434=".concat(e.code," \u043f\u0440\u0438\u0447\u0438\u043d\u0430=").concat(e.reason)):(console.log("[close] \u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043f\u0440\u0435\u0440\u0432\u0430\u043d\u043e"),a())}function d(e){console.log("[error] ".concat(e))}return a(),Object(U.jsx)(U.Fragment,{})},ca=Object(f.a)((function(e){return{wrapper:Object(u.a)({display:"flex",flex:"1 1 auto",overflow:"hidden",paddingTop:64},e.breakpoints.up("lg"),{paddingLeft:256}),contentContainer:{display:"flex",flex:"1 1 auto",overflow:"hidden"},content:{flex:"1 1 auto",height:"100%",overflow:"auto"}}}));var oa=function(){var e=ca(),t=Object(Y.a)("(prefers-color-scheme: dark)"),n=Object(y.b)(),a=r.a.useState(!0),c=Object(d.a)(a,2),o=c[0],i=c[1],u=Object(y.c)((function(e){return e.online})),h=r.a.useMemo((function(){return new T.a}),[]),p=r.a.useMemo((function(){return Object(K.a)({palette:{type:t?"dark":"light"}})}),[t]);return r.a.useEffect((function(){var e=h.get("sid");console.log("APP");e&&!u&&new Promise(function(){var t=Object(l.a)(s.a.mark((function t(n,a){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://".concat(window.location.hostname,"/is_me"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({sid:e})});case 2:if(200!==(r=t.sent).status){t.next=9;break}return t.t0=n,t.next=7,r.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:return t.t2=a,t.next=12,r.json();case 12:return t.t3=t.sent,t.abrupt("return",(0,t.t2)(t.t3));case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()).then((function(e){h.set("name",e.name,{expires:new Date(e.expires)}),h.set("sid",e.accessToken,{expires:new Date(e.expires)}),h.set("refresh",e.refreshToken,{expires:new Date(e.expires)}),i(!1),n(H(!0))})).catch((function(e){console.log(e),h.remove("sid"),h.remove("refresh"),i(!1),n(H(!1))}))}),[u,h,n]),Object(U.jsxs)($.a,{theme:p,children:[Object(U.jsx)(Q.a,{}),o&&"...Loading",u?Object(U.jsxs)(j.a,{children:[Object(U.jsx)(Te,{}),Object(U.jsx)("div",{className:e.wrapper,children:Object(U.jsx)("div",{className:e.contentContainer,children:Object(U.jsxs)("div",{className:e.content,children:[Object(U.jsxs)(b.d,{children:[Object(U.jsx)(b.b,{exact:!0,path:"/clients",children:Object(U.jsx)(sn,{})}),Object(U.jsx)(b.b,{exact:!0,path:"/shops",children:Object(U.jsx)(Jn,{})}),Object(U.jsx)(b.b,{exact:!0,path:"/orders",children:Object(U.jsx)(aa,{})}),Object(U.jsx)(b.b,{exact:!0,path:"/*",children:Object(U.jsx)(b.a,{to:"/orders"})})]}),Object(U.jsx)(ra,{})]})})})]}):o&&Object(U.jsx)(V,{})]})},ia=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,420)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))},sa=n(128),la=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return t.payload.bool;default:return e}},da=n(30),ua=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return t.payload.clients;case R:return[].concat(Object(da.a)(e),[t.payload.client]);case E:return e.map((function(e){return e._id===t.payload.client._id?t.payload.client:e}));case D:return e.map((function(e){return e._id===t.payload.order.client_id?Object(re.a)(Object(re.a)({},e),{},{orders:t.payload.order.orders}):e}));default:return e}},ja=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case _:return t.payload.shops;case I:return[].concat(Object(da.a)(e),[t.payload.shop]);case A:return e.map((function(e){return e._id===t.payload.shop._id?t.payload.shop:e}));case W:return e.map((function(e){var n,a,r,c;return e._id===(null===t||void 0===t||null===(n=t.payload)||void 0===n||null===(a=n.order)||void 0===a?void 0:a.shop_id)?Object(re.a)(Object(re.a)({},e),{},{clients:null===t||void 0===t||null===(r=t.payload)||void 0===r||null===(c=r.order)||void 0===c?void 0:c.clients}):e}));default:return e}},ba=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return t.payload.orders;case L:return[].concat(Object(da.a)(e),[t.payload.order]);case z:return e.filter((function(e){return e._id!==t.payload._id}));case M:return e.map((function(e){return e._id===t.payload.order._id?t.payload.order:e}));default:return e}},ha=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return[].concat(Object(da.a)(e),[t.payload.data]);default:return e}},pa=Object(sa.a)({online:la,clients:ua,shops:ja,orders:ba,notifications:ha}),fa=function(){return{online:!1,clients:[],shops:[],orders:[],notifications:[]}},xa=Object(sa.b)(pa,fa()),Oa=n(127),ma=n.n(Oa);n(336);ma.a.locale("ru");window.formatDate=function(e){return ma()(e).calendar()},window.formatStatus=function(e,t){switch(+e){case 0:return"\u041d\u043e\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437";case 1:return"\u041d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435 \u0432 \u0422\u0443\u0440\u0446\u0438\u0438";case 2:return"\u041d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435 \u0432 \u041c\u0421\u041a";case 3:return"\u0413\u043e\u0442\u043e\u0432 \u043a \u0432\u044b\u0434\u0430\u0447\u0435 (".concat(t,")");case 4:return"\u0412\u044b\u0434\u0430\u043d";default:return e}},o.a.render(Object(U.jsx)(j.a,{children:Object(U.jsx)(y.a,{store:xa,children:Object(U.jsx)(oa,{})})}),document.getElementById("root")),ia()}},[[337,1,2]]]);